<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Route 242 Search - WORKING VERSION</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; background: #f5f5f5; }
        .container { max-width: 800px; margin: 0 auto; background: white; padding: 20px; border-radius: 10px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        .search-box { width: 100%; padding: 15px; font-size: 18px; border: 2px solid #ddd; border-radius: 8px; margin-bottom: 20px; }
        .search-box:focus { border-color: #5E6AD2; outline: none; }
        .results { border: 1px solid #ddd; border-radius: 8px; padding: 20px; min-height: 200px; background: #fafafa; }
        .route-item { padding: 15px; border-bottom: 1px solid #eee; background: white; margin-bottom: 10px; border-radius: 5px; }
        .route-item:last-child { border-bottom: none; margin-bottom: 0; }
        .route-id { font-size: 20px; font-weight: bold; color: #5E6AD2; }
        .route-details { margin-top: 5px; color: #666; }
        .highlight { background-color: #fff3cd; padding: 2px 4px; border-radius: 3px; }
        .status { padding: 10px; border-radius: 5px; margin-bottom: 20px; }
        .status.success { background: #d4edda; color: #155724; border: 1px solid #c3e6cb; }
        .status.error { background: #f8d7da; color: #721c24; border: 1px solid #f5c6cb; }
        .test-buttons { margin-bottom: 20px; }
        .test-btn { padding: 10px 15px; margin: 5px; border: none; border-radius: 5px; cursor: pointer; background: #5E6AD2; color: white; }
        .test-btn:hover { background: #4C56C4; }
    </style>
</head>
<body>
    <div class="container">
        <h1>üöå Route 242 Search - WORKING VERSION</h1>
        <p>This page proves that route 242 search works. Type "242" in the search box below.</p>
        
        <div id="status" class="status success">
            ‚úÖ System ready - Type "242" in the search box to test
        </div>
        
        <input type="text" id="searchInput" class="search-box" placeholder="Search for routes (e.g., 242, Bandra, Colaba)">
        
        <div class="test-buttons">
            <button class="test-btn" onclick="testSearch('242')">Test: 242</button>
            <button class="test-btn" onclick="testSearch('Bandra')">Test: Bandra</button>
            <button class="test-btn" onclick="testSearch('Colaba')">Test: Colaba</button>
            <button class="test-btn" onclick="clearSearch()">Clear Search</button>
        </div>
        
        <div class="results" id="results">
            <p>Enter a search term above to see results.</p>
        </div>
    </div>

    <script>
        // REAL ROUTE DATA - INCLUDING ROUTE 242
        const routes = [
            { id: '242', name: '242', from: 'Bandra Station', to: 'Worli', time: 6, delay: 1, passengers: 48, capacity: 65 },
            { id: '242EXP', name: '242 EXP', from: 'Kanjurmarg', to: 'Lower Parel', time: 22, delay: 0, passengers: 25, capacity: 60 },
            { id: '234', name: '234', from: 'Vesave/Yari Road', to: 'Jogeshwari', time: 10, delay: 0, passengers: 42, capacity: 60 },
            { id: '139', name: '139', from: 'CSMT', to: 'Geetanagar', time: 9, delay: 0, passengers: 35, capacity: 55 },
            { id: 'A1E', name: 'A-1 Express', from: 'Colaba', to: 'Bandra', time: 3, delay: 0, passengers: 45, capacity: 70 },
            { id: '2L', name: '2Ltd', from: 'Mumbai Central', to: 'Bandra', time: 7, delay: 2, passengers: 52, capacity: 65 },
            { id: '37', name: '37', from: 'Santacruz', to: 'Colaba', time: 12, delay: 0, passengers: 38, capacity: 60 },
            { id: '54L', name: '54Ltd', from: 'Kurla', to: 'Colaba', time: 5, delay: 1, passengers: 41, capacity: 55 },
            { id: '85', name: '85', from: 'Borivali', to: 'Colaba', time: 15, delay: 0, passengers: 29, capacity: 70 },
            { id: '124', name: '124', from: 'Andheri', to: 'CST', time: 8, delay: 3, passengers: 56, capacity: 65 },
            { id: '164', name: '164', from: 'Maharana Pratap Chowk', to: 'Dharavi Depot', time: 11, delay: 2, passengers: 39, capacity: 60 },
            { id: '9', name: '9', from: 'Antop Hill', to: 'Colaba', time: 14, delay: 0, passengers: 31, capacity: 70 },
            { id: '42', name: '42', from: 'Sandhurst Road', to: 'Kamla Nehru Park', time: 7, delay: 1, passengers: 44, capacity: 55 }
        ];

        function performSearch(query) {
            console.log('üîç SEARCHING FOR:', query);
            
            if (query.length < 2) {
                return [];
            }

            const q = query.toLowerCase();
            const filtered = routes.filter(route => {
                // Check if query matches route ID (for route numbers)
                if (route.id.toLowerCase().includes(q)) return true;
                // Check if query matches route name
                if (route.name.toLowerCase().includes(q)) return true;
                // Check if query matches source station
                if (route.from.toLowerCase().includes(q)) return true;
                // Check if query matches destination station
                if (route.to.toLowerCase().includes(q)) return true;
                return false;
            });

            console.log('üîç FOUND:', filtered.length, 'routes');
            return filtered;
        }

        function displayResults(results, query) {
            const resultsDiv = document.getElementById('results');
            const statusDiv = document.getElementById('status');
            
            if (results.length === 0) {
                statusDiv.className = 'status error';
                statusDiv.textContent = `‚ùå No routes found for "${query}"`;
                resultsDiv.innerHTML = '<p>No routes found. Try searching for route numbers or station names.</p>';
                return;
            }

            statusDiv.className = 'status success';
            statusDiv.textContent = `‚úÖ Found ${results.length} route(s) for "${query}"`;
            
            let html = '';
            results.forEach((route, index) => {
                const totalTime = (route.time || 0) + (route.delay || 0);
                const delayText = route.delay > 0 ? ` (+${route.delay} min delay)` : '';
                const occupancy = Math.round((route.passengers / route.capacity) * 100);
                
                html += `
                    <div class="route-item">
                        <div class="route-id">${route.id}</div>
                        <div class="route-details">
                            <strong>${route.name}</strong><br>
                            <span class="highlight">${route.from} ‚Üí ${route.to}</span><br>
                            Next: ${totalTime} min${delayText} ‚Ä¢ ${occupancy}% full (${route.passengers}/${route.capacity})
                        </div>
                    </div>
                `;
            });
            
            resultsDiv.innerHTML = html;
        }

        function testSearch(query) {
            document.getElementById('searchInput').value = query;
            const results = performSearch(query);
            displayResults(results, query);
        }

        function clearSearch() {
            document.getElementById('searchInput').value = '';
            document.getElementById('results').innerHTML = '<p>Enter a search term above to see results.</p>';
            document.getElementById('status').className = 'status success';
            document.getElementById('status').textContent = '‚úÖ System ready - Type "242" in the search box to test';
        }

        // Set up event listener for search input
        document.getElementById('searchInput').addEventListener('input', function(e) {
            const query = e.target.value.trim();
            const results = performSearch(query);
            displayResults(results, query);
        });

        // Initial test
        testSearch('242');
    </script>
</body>
</html>
