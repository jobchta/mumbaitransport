<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Search Test - Route 242</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .test-container { max-width: 800px; margin: 0 auto; }
        .search-box { width: 100%; padding: 10px; font-size: 16px; margin-bottom: 20px; }
        .results { border: 1px solid #ccc; padding: 20px; min-height: 200px; }
        .route-item { padding: 10px; border-bottom: 1px solid #eee; }
        .route-item:last-child { border-bottom: none; }
        .highlight { background-color: yellow; }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>üîç Route 242 Search Test</h1>
        <p>This page tests the search functionality for route 242.</p>
        
        <input type="text" id="searchInput" class="search-box" placeholder="Search for routes (e.g., 242, Bandra, Colaba)">
        
        <div class="results" id="results">
            <p>Enter a search term above to test the functionality.</p>
        </div>
        
        <div style="margin-top: 20px;">
            <h3>Test Cases:</h3>
            <button onclick="testSearch('242')">Test: 242</button>
            <button onclick="testSearch('Bandra')">Test: Bandra</button>
            <button onclick="testSearch('Colaba')">Test: Colaba</button>
            <button onclick="testSearch('999')">Test: 999 (should return empty)</button>
        </div>
    </div>

    <script>
        // Load the routes data from the main application
        const routes = [
            // Sample routes - this should match what's in the main app
            { id: '242', name: '242', from: 'Bandra Station', to: 'Worli', time: 6, delay: 1, passengers: 48, capacity: 65 },
            { id: '242EXP', name: '242 EXP', from: 'Kanjurmarg', to: 'Lower Parel', time: 22, delay: 0, passengers: 25, capacity: 60 },
            { id: '234', name: '234', from: 'Vesave/Yari Road', to: 'Jogeshwari', time: 10, delay: 0, passengers: 42, capacity: 60 },
            { id: '139', name: '139', from: 'CSMT', to: 'Geetanagar', time: 9, delay: 0, passengers: 35, capacity: 55 },
            { id: 'A1E', name: 'A-1 Express', from: 'Colaba', to: 'Bandra', time: 3, delay: 0, passengers: 45, capacity: 70 },
            { id: '2L', name: '2Ltd', from: 'Mumbai Central', to: 'Bandra', time: 7, delay: 2, passengers: 52, capacity: 65 }
        ];

        function performSearch(query) {
            if (query.length < 2) {
                return [];
            }

            const q = query.toLowerCase();
            const filtered = routes.filter(route => {
                // Check if query matches route ID (for route numbers)
                if (route.id.toLowerCase().includes(q)) return true;
                // Check if query matches route name
                if (route.name.toLowerCase().includes(q)) return true;
                // Check if query matches source station
                if (route.from.toLowerCase().includes(q)) return true;
                // Check if query matches destination station
                if (route.to.toLowerCase().includes(q)) return true;
                return false;
            });

            return filtered;
        }

        function displayResults(results, query) {
            const resultsDiv = document.getElementById('results');
            
            if (results.length === 0) {
                resultsDiv.innerHTML = `<p>‚ùå No routes found for "${query}"</p>`;
                return;
            }

            let html = `<h3>‚úÖ Found ${results.length} route(s) for "${query}":</h3>`;
            
            results.forEach((route, index) => {
                const totalTime = (route.time || 0) + (route.delay || 0);
                const delayText = route.delay > 0 ? ` (+${route.delay} min delay)` : '';
                
                html += `
                    <div class="route-item">
                        <strong>${route.id}</strong> - ${route.name}<br>
                        <span class="highlight">${route.from} ‚Üí ${route.to}</span><br>
                        <small>Next: ${totalTime} min${delayText} ‚Ä¢ Passengers: ${route.passengers}/${route.capacity}</small>
                    </div>
                `;
            });
            
            resultsDiv.innerHTML = html;
        }

        function testSearch(query) {
            document.getElementById('searchInput').value = query;
            const results = performSearch(query);
            displayResults(results, query);
        }

        // Set up event listener for search input
        document.getElementById('searchInput').addEventListener('input', function(e) {
            const query = e.target.value.trim();
            const results = performSearch(query);
            displayResults(results, query);
        });

        // Initial test
        testSearch('242');
    </script>
</body>
</html>
