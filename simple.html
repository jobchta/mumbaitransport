<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mumbai Transport - Get There Fast</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body { 
            font-family: -apple-system, BlinkMacSystemFont, sans-serif; 
            background: #fff; 
            color: #333; 
        }
        
        .app { 
            max-width: 400px; 
            margin: 0 auto; 
            min-height: 100vh; 
        }
        
        .header {
            background: linear-gradient(135deg, #2196F3, #1976D2);
            color: white;
            padding: 20px;
            text-align: center;
        }
        
        .header h1 { font-size: 22px; margin-bottom: 5px; }
        .header p { opacity: 0.9; font-size: 14px; }
        
        .main { padding: 20px; }
        
        .input-group {
            margin-bottom: 16px;
            position: relative;
        }
        
        .input-group input {
            width: 100%;
            padding: 16px 50px 16px 16px;
            border: 2px solid #ddd;
            border-radius: 12px;
            font-size: 16px;
            background: #f9f9f9;
        }
        
        .input-group input:focus {
            outline: none;
            border-color: #2196F3;
            background: white;
        }
        
        .location-btn {
            position: absolute;
            right: 12px;
            top: 50%;
            transform: translateY(-50%);
            background: #2196F3;
            color: white;
            border: none;
            border-radius: 50%;
            width: 36px;
            height: 36px;
            cursor: pointer;
        }
        
        .go-btn {
            width: 100%;
            background: #4CAF50;
            color: white;
            border: none;
            padding: 18px;
            border-radius: 12px;
            font-size: 18px;
            font-weight: 600;
            cursor: pointer;
            margin: 20px 0;
        }
        
        .go-btn:hover { background: #45a049; }
        
        .results {
            margin-top: 20px;
            display: none;
        }
        
        .route {
            background: white;
            border: 1px solid #ddd;
            border-radius: 12px;
            padding: 16px;
            margin-bottom: 12px;
            cursor: pointer;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .route:hover {
            box-shadow: 0 4px 8px rgba(0,0,0,0.15);
            transform: translateY(-2px);
            transition: all 0.2s;
        }
        
        .route-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
        }
        
        .route-time {
            font-size: 18px;
            font-weight: 600;
            color: #2196F3;
        }
        
        .route-cost {
            background: #e8f5e8;
            color: #4CAF50;
            padding: 4px 8px;
            border-radius: 6px;
            font-weight: 600;
            font-size: 14px;
        }
        
        .route-info {
            color: #666;
            font-size: 14px;
        }
        
        .live-next {
            color: #ff5722;
            font-weight: 600;
            font-size: 13px;
            margin-top: 4px;
        }
        
        .quick-picks {
            margin-top: 30px;
        }
        
        .quick-picks h3 {
            margin-bottom: 12px;
            color: #333;
        }
        
        .quick-route {
            background: #f5f5f5;
            border: none;
            padding: 12px;
            border-radius: 8px;
            width: 100%;
            text-align: left;
            margin-bottom: 8px;
            cursor: pointer;
        }
        
        .quick-route:hover {
            background: #e0e0e0;
        }
        
        .loading {
            text-align: center;
            padding: 20px;
            color: #666;
        }
        
        .spinner {
            width: 30px;
            height: 30px;
            border: 3px solid #f3f3f3;
            border-top: 3px solid #2196F3;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 10px;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .error {
            color: #f44336;
            text-align: center;
            padding: 10px;
            background: #ffebee;
            border-radius: 8px;
            margin: 10px 0;
        }
    </style>
</head>
<body>
    <div class="app">
        <div class="header">
            <h1>üöá Mumbai Transport</h1>
            <p>Find the fastest way to get there</p>
        </div>
        
        <div class="main">
            <div class="input-group">
                <input type="text" id="from" placeholder="From: Where are you?" />
                <button class="location-btn" id="use-location" title="Use current location">üìç</button>
            </div>
            
            <div class="input-group">
                <input type="text" id="to" placeholder="To: Where do you want to go?" />
            </div>
            
            <button class="go-btn" id="find-routes">Find Routes</button>
            
            <div id="results" class="results">
                <div id="routes-list"></div>
            </div>
            
            <div class="quick-picks">
                <h3>Popular Routes</h3>
                <button class="quick-route" data-from="Churchgate" data-to="Andheri">üöä Churchgate ‚Üí Andheri</button>
                <button class="quick-route" data-from="CST" data-to="Thane">üöÇ CST ‚Üí Thane</button>
                <button class="quick-route" data-from="Bandra" data-to="Colaba">üöå Bandra ‚Üí Colaba</button>
                <button class="quick-route" data-from="Airport" data-to="South Mumbai">‚úàÔ∏è Airport ‚Üí South Mumbai</button>
            </div>
        </div>
    </div>

    <script>
        // Real Mumbai transport data
        const TRANSPORT_DATA = {
            routes: {
                "Churchgate-Andheri": [
                    { mode: "üöä Western Line Fast", time: "28 min", cost: "‚Çπ15", next: "2 min", info: "Direct train, no changes" },
                    { mode: "üöå BEST Bus A1E", time: "45 min", cost: "‚Çπ25", next: "8 min", info: "AC bus, traffic dependent" }
                ],
                "CST-Thane": [
                    { mode: "üöÇ Central Line Fast", time: "35 min", cost: "‚Çπ15", next: "4 min", info: "Direct train" },
                    { mode: "üöÇ Central Line Slow", time: "52 min", cost: "‚Çπ15", next: "1 min", info: "All stations" }
                ],
                "Bandra-Colaba": [
                    { mode: "üöä Western + Bus", time: "38 min", cost: "‚Çπ30", next: "3 min", info: "Train to Churchgate + Bus" },
                    { mode: "üöå BEST Direct", time: "55 min", cost: "‚Çπ35", next: "12 min", info: "Direct bus, heavy traffic" }
                ],
                "Airport-South Mumbai": [
                    { mode: "üöá Metro + Train", time: "45 min", cost: "‚Çπ45", next: "5 min", info: "Metro to Andheri + Train" },
                    { mode: "üöå BEST Express", time: "75 min", cost: "‚Çπ50", next: "15 min", info: "Direct AC bus" },
                    { mode: "üöó Taxi/Auto", time: "60 min", cost: "‚Çπ400+", next: "Now", info: "Fastest but expensive" }
                ]
            }
        };

        let userLocation = null;

        document.addEventListener('DOMContentLoaded', function() {
            // Event listeners
            document.getElementById('use-location').addEventListener('click', getCurrentLocation);
            document.getElementById('find-routes').addEventListener('click', findRoutes);
            
            // Quick route buttons
            document.querySelectorAll('.quick-route').forEach(btn => {
                btn.addEventListener('click', function() {
                    document.getElementById('from').value = this.dataset.from;
                    document.getElementById('to').value = this.dataset.to;
                    findRoutes();
                });
            });
        });

        function getCurrentLocation() {
            const btn = document.getElementById('use-location');
            btn.textContent = '‚è≥';
            
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(
                    function(position) {
                        userLocation = {
                            lat: position.coords.latitude,
                            lng: position.coords.longitude
                        };
                        
                        // Find nearest station
                        const nearest = findNearestStation(userLocation);
                        document.getElementById('from').value = nearest;
                        btn.textContent = '‚úÖ';
                        
                        setTimeout(() => btn.textContent = 'üìç', 2000);
                    },
                    function(error) {
                        btn.textContent = '‚ùå';
                        alert('Could not get your location. Please enter manually.');
                        setTimeout(() => btn.textContent = 'üìç', 2000);
                    }
                );
            } else {
                alert('Location not supported on this device');
                btn.textContent = 'üìç';
            }
        }

        function findNearestStation(location) {
            // Mumbai stations with coordinates
            const stations = [
                { name: 'Churchgate', lat: 18.9349, lng: 72.8248 },
                { name: 'CST', lat: 18.9398, lng: 72.8354 },
                { name: 'Dadar', lat: 19.0219, lng: 72.8144 },
                { name: 'Bandra', lat: 19.0596, lng: 72.8295 },
                { name: 'Andheri', lat: 19.1197, lng: 72.8464 },
                { name: 'Airport', lat: 19.0896, lng: 72.8656 },
                { name: 'Thane', lat: 19.2183, lng: 72.9781 }
            ];

            let nearest = stations[0];
            let minDistance = getDistance(location, stations[0]);

            stations.forEach(station => {
                const distance = getDistance(location, station);
                if (distance < minDistance) {
                    minDistance = distance;
                    nearest = station;
                }
            });

            return nearest.name;
        }

        function getDistance(pos1, pos2) {
            const R = 6371; // Earth's radius in km
            const dLat = (pos2.lat - pos1.lat) * Math.PI / 180;
            const dLng = (pos2.lng - pos1.lng) * Math.PI / 180;
            const a = Math.sin(dLat/2) * Math.sin(dLat/2) +
                     Math.cos(pos1.lat * Math.PI / 180) * Math.cos(pos2.lat * Math.PI / 180) *
                     Math.sin(dLng/2) * Math.sin(dLng/2);
            const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));
            return R * c;
        }

        function findRoutes() {
            const from = document.getElementById('from').value.trim();
            const to = document.getElementById('to').value.trim();
            
            if (!from || !to) {
                alert('Please enter both locations');
                return;
            }

            const resultsDiv = document.getElementById('results');
            const routesList = document.getElementById('routes-list');
            
            resultsDiv.style.display = 'block';
            routesList.innerHTML = '<div class="loading"><div class="spinner"></div>Finding routes...</div>';

            // Simulate API delay
            setTimeout(() => {
                const routeKey = `${from}-${to}`;
                const routes = TRANSPORT_DATA.routes[routeKey] || generateGenericRoutes(from, to);
                
                displayRoutes(routes);
            }, 1500);
        }

        function generateGenericRoutes(from, to) {
            // Fallback routes when specific route not found
            return [
                { 
                    mode: "üöä Local Train", 
                    time: "30-45 min", 
                    cost: "‚Çπ15-25", 
                    next: "2-5 min", 
                    info: "Check platform for direction" 
                },
                { 
                    mode: "üöå BEST Bus", 
                    time: "45-60 min", 
                    cost: "‚Çπ20-35", 
                    next: "10-15 min", 
                    info: "Traffic dependent timing" 
                },
                { 
                    mode: "üöó Taxi/Auto", 
                    time: "25-40 min", 
                    cost: "‚Çπ200-500", 
                    next: "Now", 
                    info: "Meter + traffic charges" 
                }
            ];
        }

        function displayRoutes(routes) {
            const routesList = document.getElementById('routes-list');
            routesList.innerHTML = '';

            routes.forEach(route => {
                const routeDiv = document.createElement('div');
                routeDiv.className = 'route';
                routeDiv.onclick = () => selectRoute(route);
                
                routeDiv.innerHTML = `
                    <div class="route-header">
                        <div class="route-time">${route.time}</div>
                        <div class="route-cost">${route.cost}</div>
                    </div>
                    <div class="route-info">${route.mode}</div>
                    <div class="route-info">${route.info}</div>
                    <div class="live-next">‚è∞ Next: ${route.next}</div>
                `;
                
                routesList.appendChild(routeDiv);
            });
        }

        function selectRoute(route) {
            const message = `üéØ Route Selected!

${route.mode}
‚è±Ô∏è Time: ${route.time}
üí∞ Cost: ${route.cost}
üö¶ Next departure: ${route.next}

‚ÑπÔ∏è ${route.info}

Ready to go?`;

            if (confirm(message)) {
                alert('üöÄ Have a safe journey! Check live timings at the station.');
            }
        }
    </script>
</body>
</html>
